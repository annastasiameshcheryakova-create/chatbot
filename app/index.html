<!doctype html>
<html lang="uk">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>BioConsult ‚Äî Pastel RAG Chat (LLM)</title>
  <link rel="stylesheet" href="./styles.css" />
</head>

<body>
  <div class="app">
    <aside class="sidebar">
      <div class="sb-top">
        <button class="iconbtn" title="–ú–µ–Ω—é" aria-label="–ú–µ–Ω—é">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round">
            <path d="M4 6h16M4 12h16M4 18h16"/>
          </svg>
        </button>

        <div class="brand">
          <span class="logo" aria-hidden="true"></span>
          <span>BioConsult</span>
        </div>

        <button class="iconbtn" title="–ü–æ—à—É–∫" aria-label="–ü–æ—à—É–∫">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round">
            <circle cx="11" cy="11" r="7"></circle>
            <path d="M20 20l-3.2-3.2"></path>
          </svg>
        </button>
      </div>

      <button class="newchat" id="newChatBtn">
        <span class="badge"></span>
        <span>–ù–æ–≤–∏–π –¥—ñ–∞–ª–æ–≥</span>
      </button>

      <div class="sb-section"><span>–ë–∞–∑–∞ –∑–Ω–∞–Ω—å (RAG)</span><span style="opacity:.7" id="kbCount">0 —Ñ–∞–π–ª—ñ–≤</span></div>
      <div class="sb-list" id="kbList"></div>

      <div class="sb-footer">üß¨ –ö–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç –∑ –±—ñ–æ–ª–æ–≥—ñ—ó ‚Ä¢ RAG —É –±—Ä–∞—É–∑–µ—Ä—ñ</div>
    </aside>

    <main class="main" id="main">
      <header class="topbar">
        <div class="pill" id="apiPill" title="–ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è LLM">
          ‚öô API: <strong id="apiState">–Ω–µ –Ω–∞–ª–∞—à—Ç–æ–≤–∞–Ω–æ</strong>
        </div>
        <div style="display:flex; align-items:center; gap:10px;">
          <button class="pill" id="ragToggleBtn" aria-pressed="true">üß† RAG: —É–≤—ñ–º–∫–Ω–µ–Ω–æ</button>
          <div class="avatar" title="–ü—Ä–æ—Ñ—ñ–ª—å"></div>
        </div>
      </header>

      <section class="content">
        <div class="hero">
          <div class="hello">
            <span class="leafMark" aria-hidden="true"></span>
            <span>–ü—Ä–∏–≤—ñ—Ç! –Ø BioConsult</span>
          </div>
          <h1 class="title">–ù–∞–≤—á–∞–π –º–µ–Ω–µ —Å–≤–æ—ó–º–∏ –º–∞—Ç–µ—Ä—ñ–∞–ª–∞–º–∏ ‚Äî —ñ —è –≤—ñ–¥–ø–æ–≤—ñ–¥–∞—Ç–∏–º—É —Ç–æ—á–Ω—ñ—à–µ</h1>
          <div class="subtitle">
            –ù–∞—Ç–∏—Å–Ω–∏ ‚Äú+‚Äù ‚Üí –¥–æ–¥–∞–π .txt/.md (—Ü–µ –±—É–¥–µ –±–∞–∑–∞ –∑–Ω–∞–Ω—å). –ü–æ—Ç—ñ–º —Å—Ç–∞–≤ –∑–∞–ø–∏—Ç–∞–Ω–Ω—è ‚Äî
            —è –∑–Ω–∞–π–¥—É —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ñ —Ñ—Ä–∞–≥–º–µ–Ω—Ç–∏ —ñ –≤—ñ–¥–ø–æ–≤—ñ–º —á–µ—Ä–µ–∑ LLM, –ø–æ–∫–∞–∑–∞–≤—à–∏ –¥–∂–µ—Ä–µ–ª–∞.
          </div>
        </div>

        <div class="chatlog" id="chatLog" aria-live="polite"></div>
      </section>

      <div class="composer-wrap">
        <div class="composer-area">
          <div class="composer" id="composer">

            <div class="plusMenu" id="plusMenu" role="menu" aria-label="–ú–µ–Ω—é –¥–æ–¥–∞–≤–∞–Ω–Ω—è">
              <div class="pmTitle">
                <span>–î–æ–¥–∞—Ç–∏</span>
                <button class="iconbtn" id="closePlusMenu" title="–ó–∞–∫—Ä–∏—Ç–∏" aria-label="–ó–∞–∫—Ä–∏—Ç–∏" style="width:32px;height:32px;">‚úï</button>
              </div>
              <div class="pmGrid">
                <button class="pmBtn" id="pmAddImageFile" type="button">
                  <div class="l">üñºÔ∏è –î–æ–¥–∞—Ç–∏ –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è (—Ñ–∞–π–ª)</div>
                  <div class="r">jpg/png/webp</div>
                </button>
                <button class="pmBtn" id="pmAddImageUrl" type="button">
                  <div class="l">‚òÅÔ∏è –î–æ–¥–∞—Ç–∏ –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è –∑ —Ö–º–∞—Ä–∏ (URL)</div>
                  <div class="r">–ø–æ—Å–∏–ª–∞–Ω–Ω—è</div>
                </button>
                <button class="pmBtn" id="pmAddTextFile" type="button">
                  <div class="l">üìÑ –î–æ–¥–∞—Ç–∏ –º–∞—Ç–µ—Ä—ñ–∞–ª (.txt/.md)</div>
                  <div class="r">–Ω–∞–≤—á–∏—Ç–∏ RAG</div>
                </button>
                <button class="pmBtn" id="pmClearKB" type="button">
                  <div class="l">üßΩ –û—á–∏—Å—Ç–∏—Ç–∏ –±–∞–∑—É –∑–Ω–∞–Ω—å</div>
                  <div class="r">RAG</div>
                </button>
                <button class="pmBtn" id="pmClearChat" type="button">
                  <div class="l">üßπ –û—á–∏—Å—Ç–∏—Ç–∏ —á–∞—Ç</div>
                  <div class="r">—Å–∫–∏–Ω—É—Ç–∏</div>
                </button>
              </div>
              <div class="tiny">–ü–æ—Ä–∞–¥–∞: –¥–æ–¥–∞–π –∫—ñ–ª—å–∫–∞ –∫–æ–Ω—Å–ø–µ–∫—Ç—ñ–≤ .txt/.md ‚Äî –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ —Å—Ç–∞–Ω—É—Ç—å ‚Äú–ø—ñ–¥ —Ç–≤–æ—é –ø—Ä–æ–≥—Ä–∞–º—É‚Äù.</div>
            </div>

            <div class="composer-row">
              <button class="plus" id="plusBtn" title="–î–æ–¥–∞—Ç–∏" aria-label="–î–æ–¥–∞—Ç–∏">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round">
                  <path d="M12 5v14M5 12h14"/>
                </svg>
              </button>

              <div class="input">
                <textarea id="prompt" placeholder="–ó–∞–ø–∏—Ç–∞–π—Ç–µ BioConsult‚Ä¶" rows="1"></textarea>
              </div>

              <div class="tools">
                <button class="send" id="sendBtn" title="–ù–∞–¥—ñ—Å–ª–∞—Ç–∏" aria-label="–ù–∞–¥—ñ—Å–ª–∞—Ç–∏">
                  <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M5 12h14"></path>
                    <path d="M13 5l7 7-7 7"></path>
                  </svg>
                </button>
              </div>
            </div>

            <div class="chips" id="chips">
              <div class="chip">üåø –ü–æ—è—Å–Ω–∏ —Ñ–æ—Ç–æ—Å–∏–Ω—Ç–µ–∑</div>
              <div class="chip">üß¨ –©–æ —Ç–∞–∫–µ —Ä–µ–ø–ª—ñ–∫–∞—Ü—ñ—è –î–ù–ö?</div>
              <div class="chip">ü¶† –†—ñ–∑–Ω–∏—Ü—è –≤—ñ—Ä—É—Å/–±–∞–∫—Ç–µ—Ä—ñ—è</div>
              <div class="chip">üß† –ú—ñ—Ç–æ–∑ vs –º–µ–π–æ–∑</div>
            </div>

            <div class="hint">
              <span>Enter ‚Äî –Ω–∞–¥—ñ—Å–ª–∞—Ç–∏ ‚Ä¢ Shift+Enter ‚Äî –Ω–æ–≤–∏–π —Ä—è–¥–æ–∫ ‚Ä¢ ‚Äú+‚Äù ‚Äî –º–∞—Ç–µ—Ä—ñ–∞–ª–∏/–∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è</span>
              <span id="statusText">–ì–æ—Ç–æ–≤–æ</span>
            </div>

            <input id="imageInput" type="file" accept="image/*" hidden />
            <input id="textInput" type="file" accept=".txt,.md,text/plain,text/markdown" hidden />
          </div>
        </div>
      </div>
    </main>
  </div>

  <!-- MODAL: Image URL -->
  <div class="modalOverlay" id="imgModalOverlay" aria-hidden="true">
    <div class="modal" role="dialog" aria-modal="true" aria-label="–î–æ–¥–∞—Ç–∏ –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è –∑–∞ URL">
      <h3>–î–æ–¥–∞—Ç–∏ –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è –∑ —Ö–º–∞—Ä–∏ (URL)</h3>
      <p>–í—Å—Ç–∞–≤ –ø—Ä—è–º–µ –ø–æ—Å–∏–ª–∞–Ω–Ω—è –Ω–∞ –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è (–∞–±–æ –ø—É–±–ª—ñ—á–Ω–∏–π URL). –Ø–∫—â–æ –¥–æ—Å—Ç—É–ø –∑–∞–∫—Ä–∏—Ç–∏–π ‚Äî –±—Ä–∞—É–∑–µ—Ä/LLM –Ω–µ –∑–º–æ–∂–µ –∑–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏.</p>
      <div class="row">
        <input id="imgUrlInput" placeholder="https://..." />
      </div>
      <div class="modalActions">
        <button class="btn" id="cancelImgModal">–°–∫–∞—Å—É–≤–∞—Ç–∏</button>
        <button class="btn primary" id="addUrlBtn">–î–æ–¥–∞—Ç–∏</button>
      </div>
    </div>
  </div>

  <!-- MODAL: API SETTINGS -->
  <div class="modalOverlay" id="apiModalOverlay" aria-hidden="true">
    <div class="modal" role="dialog" aria-modal="true" aria-label="–ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è API">
      <h3>–ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è LLM API</h3>
      <p>
        –í—Å—Ç–∞–≤ API key —ñ –º–æ–¥–µ–ª—å. –¶–µ –ø–æ—Ç—Ä—ñ–±–Ω–æ, —â–æ–± –±–æ—Ç –≤—ñ–¥–ø–æ–≤—ñ–¥–∞–≤ ‚Äú–ø–æ-—Å–ø—Ä–∞–≤–∂–Ω—å–æ–º—É‚Äù.
        (–ö–ª—é—á –∑–±–µ—Ä—ñ–≥–∞—î—Ç—å—Å—è –ª–æ–∫–∞–ª—å–Ω–æ –≤ –±—Ä–∞—É–∑–µ—Ä—ñ.)
      </p>

      <div class="row">
        <input id="apiKeyInput" placeholder="OpenAI API key (sk-...)" />
      </div>

      <div class="row">
        <input id="modelInput" placeholder="–ú–æ–¥–µ–ª—å (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥: gpt-4o-mini)" />
      </div>

      <div class="tiny">
        –Ø–∫—â–æ –º–æ–¥–µ–ª—å –Ω–µ –ø—Ä–∞—Ü—é—î ‚Äî –∑–∞–º—ñ–Ω–∏ –Ω–∞–∑–≤—É (–≤ –∞–∫–∞—É–Ω—Ç—ñ –º–æ–∂—É—Ç—å –±—É—Ç–∏ –¥–æ—Å—Ç—É–ø–Ω—ñ —ñ–Ω—à—ñ –º–æ–¥–µ–ª—ñ).
      </div>

      <div class="modalActions">
        <button class="btn" id="apiCancel">–°–∫–∞—Å—É–≤–∞—Ç–∏</button>
        <button class="btn" id="apiClear">–û—á–∏—Å—Ç–∏—Ç–∏</button>
        <button class="btn primary" id="apiSave">–ó–±–µ—Ä–µ–≥—Ç–∏</button>
      </div>
    </div>
  </div>

  <!-- MAIN JS -->
  <script type="module" src="./main.js"></script>
</body>
</html>
